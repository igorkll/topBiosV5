local component,computer,unicode,table,a,b,c=component,computer,unicode,table,{"/init.lua","/OS.lua"},function()end,debug.traceback;local d,e,f=unicode.sub,unicode.len,unicode.char;local g,h,i=component.list,component.invoke,component.proxy;local j,k,l=computer.pullSignal,computer.shutdown,computer.uptime;local m,n,o,p,q=table.insert,table.concat,table.remove,table.sort,table.unpack;local function r(s)local t,u,v;for w in g(s)do v=tonumber(device[w].width)if not u or v>u then t,u=w,v end end;return t end;function getCP(x)return i(g(x)())end;local y=g("eeprom")()function resetPalette()local z;if depth==8 then z={0x000000,0x111111,0x222222,0x333333,0x444444,0x555555,0x666666,0x777777,0x888888,0x999999,0xAAAAAA,0xBBBBBB,0xCCCCCC,0xDDDDDD,0xEEEEEE,0xFFFFFF}elseif depth==4 then z={0xFFFFFF,0xF2B233,0xE57FD8,0x99B2F2,0xFEFE6C,0x7FCC19,0xF2B2CC,0x4C4C4C,0x999999,0x4C99B2,0xB266E5,0x3333FF,0x9F664C,0x57A64E,0xFF3333,0x000000}end;if z then for A,B in ipairs(z)do gpu.setPaletteColor(A-1,B)end end end;function split(C,D)local E,F,A={},1,1;while 1 do if A>#C then break end;local G=C:sub(A,#D+A-1)if not E[F]then E[F]=""end;if G==D then F=F+1;A=A+#D else E[F]=E[F]..C:sub(A,A)A=A+1 end end;if C:sub(#C-(#D-1),#C)==D then m(E,"")end;return E end;_G.split=split;function getDataPart(H)return split(eeprom_getData(),"\n")[H]or""end;function setDataPart(H,I)if getDataPart(H)==I then return end;if I:find("\n")then error("\\n char")end;local E=split(eeprom_getData(),"\n")for A=H,1,-1 do if not E[A]then E[A]=""end end;E[H]=I;eeprom_setData(n(E,"\n"))end;function delay(J,K)if not K then K=function()j(0.1)end end;local L=l()while l()-L<J do if K()==false then break end end end;function getLabel(w,M)local N=h(w,"getLabel")return(N and N..":"or"")..w:sub(1,3)..":"..M end;function labelIsReadonly(O)return not pcall(O.setLabel,O.getLabel())end;function formatString(C,P,Q)local R=" "C=d(C,1,P)local S,T=P-e(C),R:rep(P-e(C))if Q==1 then return T..C elseif Q==2 then C=R:rep(S//2)..C..R:rep(S//2)if#C<P then C=C..R:rep(P-e(C))end;return C else return C..T end end;function getError(U)return U or"Unknown Error"end;function toValue(S)if type(S)=="function"then return S()else return S end end;function fsList()local V={}for w in g("filesystem")do m(V,w)end;p(V,function(R,W)for A=1,#R do if R:sub(A,A)~=W:sub(A,A)then return R:byte(A)<W:byte(A)end end end)return ipairs(V)end;function boots(w)local function X(w)local O=i(w)if not O then return{}end;local Y,Z={},{}for A,B in ipairs(a)do if O.exists(B)then m(Y,B)m(Z,w)end end;local _="/boot/kernel/"for a0,M in ipairs(O.list(_)or{})do m(Y,_..M)m(Z,w)end;return Y,Y,Z end;if w then return X(w)else local Y,a1,Z={},{},{}for a0,w in fsList()do local N=h(w,"getLabel")local V=X(w)for A,B in ipairs(V)do m(Y,(N and N.."-"or"")..w:sub(1,3).."-"..B)m(a1,B)m(Z,w)end end;return Y,a1,Z end end;function getLabel2(O)return O.getLabel()or"Unnamed"end;function fsName(w)local O=i(w)return formatString(getLabel2(O),12).."  "..(O.spaceTotal()>=1048576 and"HDD"or O.spaceTotal()>=65536 and"FDD"or"SYS").."  "..(O.isReadOnly()and"R  "or"R/W").."  "..formatString(string.format("%.1f",O.spaceUsed()/O.spaceTotal()*100).."%",6,1).."  "..formatString(w,7).."…"end;gpu=i(r("gpu")or"*")if gpu then screen=getDataPart(2)if not i(screen)then screen=r("screen")if screen then setDataPart(2,screen)end end;if screen then keyboard=h(screen,"getKeyboards")[1]gpu.bind(screen)end end;if screen then rx,ry=gpu.getResolution()mx,my=gpu.maxResolution()maxDepth=math.floor(gpu.maxDepth())depth=math.floor(gpu.getDepth())pcall(h,screen,"setPrecise",false)end;if not gpu or not screen then gpu=nil;screen=nil end;isControl=screen and(keyboard or math.floor(device[screen].width)~=1)function setResolution(a2,a3,a4)gpu.setResolution(a2 or rx,a3 or ry)gpu.setDepth(a4 or depth)depth=gpu.getDepth()rx,ry=gpu.getResolution()setDataPart(5,tostring(rx))setDataPart(6,tostring(ry))setDataPart(7,tostring(depth))resetPalette()end;if screen then local a5,a6,a7=getDataPart(5),getDataPart(6),getDataPart(7)if a5==""then a5=rx end;if a6==""then a6=ry end;if a7==""then a7=depth end;a5=tonumber(a5)a6=tonumber(a6)a7=tonumber(a7)if a6>my or a5>mx or a7>maxDepth then a5=mx;a6=my;a7=maxDepth end;setResolution(a5,a6,a7)end;function selectColor(a8,a9,aa)if depth==4 then return a9 or a8 elseif depth==1 then return aa and 0xFFFFFF or 0 else return a8 end end;local ab,ac;local function ad()ab,ac=selectColor(0xE1E1E1,0xFFFFFF,true),selectColor(0x878787,0x4C4C4C,false)end;ad()local ae,af;local ag,ah,ai,aj;local ak,al;local am={{name="Classic",minDepth=1},{name="White",minDepth=1},{name="Black",minDepth=1},{name="Cyan",minDepth=4},{name="Red",minDepth=8},{name="matrix",minDepth=math.huge}}local an;local ao;local ap;function setTheme(aq,ar)if not am[aq]or depth<am[aq].minDepth then return false end;ao=false;ap=nil;if aq==1 then ae,af=ab,ac;ak,al=ab,ac;ag,ah,ai,aj=ab,ac,selectColor(ab,nil,false),selectColor(0,nil,true)elseif aq==2 then ae,af=0xFFFFFF,0;ak,al=0xFFFFFF,0;ag,ah,ai,aj=0xFFFFFF,0,0,0xFFFFFF elseif aq==3 then ae,af=0,0xFFFFFF;ak,al=0,0xFFFFFF;ag,ah,ai,aj=0,0xFFFFFF,0xFFFFFF,0 elseif aq==4 then ae,af=selectColor(0x002b36,0x3333FF),selectColor(0x8cb9c5,0x4C99B2)ak,al=ae,af;ag,ah,ai,aj=ae,af,ae,0xFFFFFF elseif aq==5 then ae,af=0x880000,0xFF0000;ak,al=ae,af;ag,ah,ai,aj=ae,af,0xFF5500,0xFFAA00 elseif aq==6 then ae,af=0x000000,0x00FF00;ak,al=ae,af;ag,ah,ai,aj=ae,af,af,ae;ao=true;ap=0.2 end;an=aq;if status and ar then status("installed the theme: "..am[aq].name)end;setDataPart(8,tostring(aq))return true end;function checkTheme()local as=getDataPart(8)as=tonumber(as)if not as then as=1 end;ad()if not setTheme(as)then setTheme(1)end end;if screen then checkTheme()end;function setColor(at,au)gpu.setBackground(at or ab)gpu.setForeground(au or ac)end;function clear(at,au)setColor(at,au)gpu.fill(1,1,rx,ry," ")if an==6 then for A=1,100 do gpu.set(math.random(1,rx),math.random(1,ry),string.char(math.random(32,127)))end end end;function invert()gpu.setForeground(gpu.setBackground(gpu.getForeground()))end;function setText(av,aw)local ax=rx//2-e(av)//2+1;gpu.set(ax,aw,av)return ax end;function status(av,ay,U)if not screen then if U then error(av,0)end;return end;if not isControl and ay==true then ay=1 end;clear(ae,af)setText(av,ry//2)if ay==true then setText("Press Enter Or Touch To Continue",ry//2+1)while true do local az,aA,a0,aB,aC=j(ap)if az=="touch"and aC==0 and aA==screen then break elseif az=="key_down"and aB==28 and aA==keyboard then break end end else if ay then if ay<0 then return end;delay(math.max(ay,0.5))else delay(0.5)end end end;function menu(N,aD,aq)if not aq or aq<1 then aq=1 end;if aq>#aD then aq=#aD end;local aE=0;for A,B in ipairs(aD)do if e(B)>aE then aE=e(B)end end;local aF={}m(aF,"")for A,B in ipairs(aD)do m(aF,formatString(B,aE+4,2))end;local aG,aw,aH,aI=(aq or 1)+1,ry//2-#aF//2,nil,{}if aw<1 then aw=1 end;while 1 do local aJ=aG//ry*ry;if aG~=aH then clear(ag,ah)if aJ==0 then setColor(ai,aj)setText(N,aw)end;setColor(ag,ah)for A=1,#aF do local aK=aw+A-aJ;if aK>=1 then if aK>ry then break end;if A==aG then invert()end;aI[A]=setText(aF[A],aK)if A==aG then invert()end end end end;local aL={j(ap)}aH=aG;if#aL>0 then if aL[1]=="key_down"and aL[2]==keyboard then if aL[4]==28 then break elseif aL[4]==200 then aG=aG-1 elseif aL[4]==208 then aG=aG+1 end elseif aL[1]=="scroll"and aL[2]==screen then aG=aG-aL[5]elseif aL[1]=="touch"and aL[2]==screen and aL[5]==0 then local aM=aL[4]-aw+aJ;if aM>=2 and aM<=#aF and aL[3]>=aI[aM]and aL[3]<aI[aM]+e(aF[aM])then aG=aM;break end end;if aG<2 then aG=2 end;if aG>#aF then aG=#aF end end;if ao then aH=-1 end end;return aG-1 end;function menuPro(N,aF,aN,aO,aP,aq,aQ)if aq and aq>#aF then aq=1 end;while 1 do local aR={}for A,B in ipairs(aF)do m(aR,toValue(B))end;if not aO then m(aR,"Back")end;aq=menu(toValue(N),aR,aq)if not aO then o(aR,#aR)end;if aN[aq]then local aS,U=pcall(aN[aq])b()if not aS then status(getError(U),true)end;if aQ then return nil end;if aP then return aq end;if aS and U=="back"then return nil end else break end end end;local aT={}function input(av,aU)local Y,aV,aW="",ry//2,0;local function aX()clear(ak,al)local Y=Y;if aU then local R="*"Y=R:rep(e(Y))end;local aY=av..": "..Y.."_"setText(aY,aV)end;while 1 do aX()local az,aA,G,aB=j(ap)if az then if az=="key_down"and aA==keyboard then if aB==28 then if#Y>0 then if not aU and Y~=aT[1]and Y~=""then m(aT,1,Y)end;return Y end elseif aB==200 or aB==208 then Y=""if aB==200 then if aW<#aT then aW=aW+1 end else if aW>0 then aW=aW-1 end end;Y=aT[aW]or""aX()elseif aB==14 then if e(Y)>0 then aW=0;Y=d(Y,1,e(Y)-1)aX()end elseif G==3 then return nil elseif G>=32 and G<=127 then aW=0;Y=Y..f(G)aX()end elseif az=="clipboard"and aA==keyboard then aW=0;Y=Y..G;if d(G,e(G),e(G))=="\n"then local aZ=d(Y,1,e(Y)-1)if not aU and aT[1]~=aZ and aT[1]~=""then m(aT,1,aZ)end;return aZ end elseif az=="touch"and aA==screen then if#Y==0 then return nil end end end end end;function yesno(N,a_,at)if at then local b0=menu(N,{"No","Yes","Back"})if b0==3 then return nil else return b0==2 end else if a_ then return menu(N,{"No","Yes"})==2 else return menu(N,{"No","No","Yes","No"})==3 end end end;function isBoot(w,M)local aS,b0=pcall(h,w,"exists",M)return aS and b0 and not h(w,"isDirectory",M)end;function bootTo(b1,b2)status("Boot From: "..getLabel(b1,b2),1)local b3=getFile(i(b1),b2)function computer.getBootAddress()return b1 end;function computer.getBootScreen()return screen end;function computer.getBootGpu()if screen then return gpu.address end;return nil end;function computer.getBootFile()return b2 end;function computer.setBootAddress(w)setDataPart(1,w or"")if w==""then setDataPart(3,"")return end;local b4;for A,B in ipairs(a)do if h(w,"exists",B)then setDataPart(3,B)b4=1;break end end;if not b4 then setDataPart(3,"")end end;function computer.setBootScreen(w)setDataPart(2,w or"")end;function computer.setBootFile(M)setDataPart(3,M or"")end;function computer.shutdown(b5)if b5=="fast"then setDataPart(4,b1 ..";"..b2)k(1)else k(b5)end end;if b2=="/OS.lua"then i(y).getData=function()return b1 end end;computer.beep(1000,0.2)local aS,U=xpcall(assert(load(b3,"=init")),c)if not aS then b=function()error(U,0)end;b()end;k()end;function executeString(C,b6)local aB,U=load(C)if not aB then status(getError(U),true)return nil,U end;local b7={pcall(aB)}if not b7[1]then status(getError(tostring(b7[2])),true)end;if b6 and b7[1]and b7[2]then status(getError(tostring(b7[2])),true)end;return q(b7)end;function checkPassword(b8)local b9=getDataPart(9)while b9~=""do if not screen then if b8 then return false else k()end end;local ba=input("Password",true)if not ba then if b8 then return false else k()end end;if ba==b9 then return true else status("The Password Doesn't Fit",1)end end end;if getDataPart(11)==""then checkPassword()end;local function bb()local aF,aN={},{}for a0,w in fsList()do local O,aq=i(w),nil;local function bc()return(getDataPart(1)==w and"> "or"  ")..fsName(w).."  "end;m(aF,bc)m(aN,function()::bd::local aF={}local aN={}local be=O.list("/boot/kernel")or{}if O.exists("/init.lua")or O.exists("/OS.lua")or#be>0 then m(aF,"Set As Bootable")m(aF,"Fastboot")for A=1,2 do m(aN,function()local aF={}local aN={}local function bf(M)m(aN,function()if A==1 then status("Seting As Bootable")setDataPart(1,O.address)setDataPart(3,M)else bootTo(O.address,M)end end)end;if A==1 then m(aF,"Any")bf("any")end;for A,B in ipairs(a)do if O.exists(B)then m(aF,B)bf(aF[#aF])end end;for a0,M in ipairs(be)do m(aF,"/boot/kernel/"..M)bf(aF[#aF])end;menuPro("Select Boot File",aF,aN,nil,nil,nil,true)end)end end;if not labelIsReadonly(O)then if keyboard then m(aF,"Change Label")m(aN,function()local ba=input("Label")if ba then O.setLabel(ba)end end)end;m(aF,"Erase Label")m(aN,function()O.setLabel(nil)end)end;local bg=w;local bh=0;for a0,w in fsList()do local bi=i(w)if not bi.isReadOnly()and w~=bg and bi.spaceTotal()>=O.spaceUsed()then bh=bh+1 end end;if bh>0 then m(aF,"Move Data")m(aN,function()local function bj(w)local N=i(w).getLabel()if N==""then N=nil end;return(N and N.."-"or"")..w:sub(1,3)end;local aF={}local aN={}for a0,w in fsList()do local bi=i(w)if not bi.isReadOnly()and w~=bg and bi.spaceTotal()>=O.spaceUsed()then local function bc()return fsName(w)end;m(aF,bc)m(aN,function()local bk=yesno("Format Target Drive?",nil,1)if bk==nil then return end;if menu("From: "..bj(bg)..", To: "..bj(w)..", Format: "..tostring(bk),{"Confirm","Cancel"})==1 then if bk then status("formating")for a0,M in ipairs(bi.list("/"))do if M~=".efi"and M~=".efiData"then bi.remove(M)end end end;local function bl(bm,bn,_)for a0,M in ipairs(bm.list(_))do local bo=_..M;if bm.isDirectory(bo)then bn.makeDirectory(bo)bl(bm,bn,bo)elseif bo~=".efi"and bo~="/.efi"and bo~=".efiData"and bo~="/.efiData"then local aZ=getFile(bm,bo)local M=bn.open(bo,"wb")bn.write(M,aZ)bn.close(M)end end end;status("Moving Files")bl(O,bi,"/")return"back"end end)end end;menuPro("Select Target Drive, To Clone: "..bj(bg),aF,aN)end)end;if not O.isReadOnly()then m(aF,"Format")m(aN,function()if yesno("Format?")then status("formating")for a0,M in ipairs(O.list("/"))do if M~=".efi"and M~=".efiData"then O.remove(M)end end;if w==getDataPart(1)then setDataPart(1,"")setDataPart(3,"")end end end)end;aq=menuPro(function()return(O.getLabel()or"Unnamed").." ("..w..")"end,aF,aN,nil,1,aq)if aq then goto bd end end)end;menuPro("Disk Menager",aF,aN)end;function internetBoot(bp)bp=bp or input("Url")if not bp then return end;return executeString(assert(getInternetFile(bp)))end;local function bq()while true do local bp=input("Url")if not bp then return end;local aZ,U=getInternetFile(bp)if not aZ then status(getError(U),true)else return executeString(aZ)end end end;local function br()local b7,bs,aF=assert(getInternetFile("https://raw.githubusercontent.com/igorkll/webMarket3/main/list.txt")),{},{}local bt=split(b7,"\n")for A,B in ipairs(bt)do local bu=split(B,";")m(aF,bu[2])m(bs,function()internetBoot(bu[1])end)end;menuPro("Select Os To Install",aF,bs)end;local function bv()while 1 do local ba=input("Lua Code")if not ba then break end;if ba=="reset"then else executeString(ba,1)end end end;local function bw()local aq;while true do local aF={}for a0,bx in ipairs{computer.users()}do m(aF,bx)end;if keyboard then m(aF,"Add User")end;m(aF,"Remove All(Set A Public)")m(aF,"Back")aq=menu("Users Manager, Public: "..tostring(#{computer.users()}==0),aF,aq)if aq==#aF then break elseif aq==#aF-1 then if yesno("Remove All Users? The Computer Will Become Public")then for a0,bx in ipairs{computer.users()}do computer.removeUser(bx)end end elseif aq==#aF-2 and keyboard then local ba=input("Nikname")if ba then local aS,U=computer.addUser(ba)if not aS then status(getError(U),true)end end else local bx=aF[aq]local aq;while true do aq=menu("Control User: "..bx,{"Remove","Back"},aq)if aq==1 then if yesno("Remove User "..bx.."?")then computer.removeUser(bx)break end elseif aq==2 then break end end end end end;local function by(b8)local b9=getDataPart(10)if b9==""then b9="0000"end;while true do local ba=input("Enter Admin Password",true)if not ba then if b8 then return false else k()end end;if ba==b9 then return true else status("The Password Doesn't Fit",1)end end end;local function b9()local function bz(bA)local function bB(C)if not C then return true end;if e(C)<4 then status("The Password Must Be Longer Than Four Characters",true)return true end end;local bC=input("Enter New "..(bA and"Admin "or"").."Password",true)if bB(bC)then return end;local bD=input("Commit New "..(bA and"Admin "or"").."Password",true)if bC==bD then status("the password is set",0.5)if bA then setDataPart(10,bC)else setDataPart(9,bC)end else status("passwords don't match",0.5)end end;local function bE()if yesno("Clear Password?")then setDataPart(9,"")end end;if not by(true)then return end;menuPro("Password",{"Set Admin Password","Set Password","Clear Password",function()if getDataPart(11)=="1"then return"Mode:mainmenu"else return"Mode:boot"end end},{function()bz(true)end,bz,bE,function()local aq=getDataPart(11)=="1"and 2 or 1;aq=menu("Select Mode",{"Boot","Main Menu"},aq)if aq==1 then setDataPart(11,"")elseif aq==2 then setDataPart(11,"1")end end})end;local function bF()local aq=tonumber(getDataPart(8))while true do local aF={}local bG={}for A=1,#am do if depth>=am[A].minDepth then m(aF,am[A].name)m(bG,A)end end;m(aF,"Back")aq=menu("Select Theme",aF,aq)local an=bG[aq]if not an then break end;setTheme(an,true)end end;local function bH()local function bI(a5,a6)return not(a6>mx or a5*a6>mx*my)end;local function bB(a5,a6,bJ)if not bI(a5,a6)then if not bJ then status("unsupported resolution",true)end;return false end;if a5<16 or a6<4 then if not bJ then status("the resolution is too small",true)end;return false end;return true end;local bH={{160,50},{80,25},{50,16},{80,40},{40,20}}if keyboard then m(bH,"custom")end;local aF={}local bK={}for A,B in ipairs(bH)do local C=type(B)=="string"and B or n(B,":")local bL,bM;if type(B)=="table"then bL,bM=q(B)end;if not bL or bI(bL,bM)then m(aF,C)m(bK,function()local bN,bO;if type(B)=="table"then bN,bO=q(B)else local input=input("resolution(x y)")if input then local V=split(input," ")local bP,bQ=tonumber(V[1]),tonumber(V[2])if type(bP)~="number"then bP=nil end;if type(bQ)~="number"then bQ=nil end;if not bP or not bQ or bP<=0 or bQ<=0 then status("input error",true)return end;bN,bO=bP,bQ end end;if bN and bB(bN,bO)then setResolution(bN,bO,depth)end end)end end;local aq;for A=1,#bH-1 do if bH[A][1]==math.floor(rx)and bH[A][2]==math.floor(ry)then aq=A;break end end;if not aq then aq=#bH end;menuPro("Resolution",aF,bK,nil,nil,aq)end;local function bR()local aq;local bS=true;while true do local aF={}local bT={}local bU={"8 Bits","4 Bits","1 Bit"}local bR={8,4,1}for A=1,#bR do if bR[A]<=maxDepth then m(aF,bU[A])m(bT,bR[A])end end;if bS then bS=false;local bV=math.floor(tonumber(getDataPart(7)))for A=1,#bT do if bT[A]==bV then aq=A;break end end end;m(aF,"Back")aq=menu("Select Depth",aF,aq)local depth=bT[aq]if not depth then break end;setResolution(rx,ry,depth)checkTheme()end end;local function bW()local bX={function()return"  Enable Multi Booting"..(getDataPart(1)=="any"and" √"or"  ")end,"Reset Settings","Users Manager","Color Depth","Resolution","Themes"}local aN={function()status("Enabling Multi Booting")setDataPart(1,"any")end,function()if by(true)and yesno("Reset EFI Settings?")then eeprom_setData("")computer.shutdown(true)end end,bw,bR,bH,bF}if keyboard then m(bX,6,"Password")m(aN,6,b9)end;menuPro("Settings",bX,aN)end;local function bY()local bX,aN={},{}m(bX,"Install Operating System")m(aN,br)if keyboard then m(bX,"Internet Boot")m(aN,bq)end;menuPro("Internet",bX,aN)end;local function bZ()local bX,aN={},{}if keyboard then m(bX,"Lua Interpreter")m(aN,bv)end;for w in g("filesystem")do local O=i(w)local _="/smartEfi/applications/"for a0,M in ipairs(O.list(_)or{})do local bo=_..M;if not O.isDirectory(bo)then m(bX,M)m(aN,function()local M,U=getFile(O,bo)if not M then status("error to get file: "..getError(U),true)return end;local aB,U=load(M)if not aB then status("error to load programm:"..getError(U),true)return end;local b_={driveAddress=w,path=bo}local aS,U=pcall(aB,b_)if not aS then status("error to running programm:"..getError(U),true)return end end)end end end;menuPro("Applications",bX,aN)end;local function c0()if getDataPart(11)=="1"then if not checkPassword(true)then return true end end;local bX,aN={"Disk Manager","Applications","Settings","Shutdown","Reboot"},{bb,bZ,bW,k,function()k(1)end}if internet then m(bX,3,"Internet")m(aN,3,bY)end;menuPro("Smart EFI",bX,aN)end::c1::if isControl and getDataPart(4)==""then::c2::if keyboard then status("Press Alt To Open The Efi Menu",-1)else status("Tap On The Screen To Open The Efi Menu",-1)end;local c3;delay(1,function()local aL={j(0.1)}if aL[1]=="key_down"and aL[2]==keyboard then if aL[4]==56 then c3=c0()if c3 then return false end elseif aL[4]==28 then return false end elseif aL[1]=="touch"and aL[2]==screen then if aL[5]==0 then c3=c0()if c3 then return false end else return false end end end)if c3 then goto c2 end end;local c4,c5=q(split(getDataPart(4),";"))local c6=getDataPart(4)~=""setDataPart(4,"")::c7::local b1,b2=getDataPart(1),getDataPart(3)local c8,c9=b2=="any"and#boots(b1)>0,b1=="any"and#boots()>0;if c6 and isBoot(c4,c5)then bootTo(c4,c5)elseif c8 or c9 then local ca,a1,Z;if c9 then ca,a1,Z=boots()else ca,a1,Z=boots(b1)end;if isControl then local cb={}for A=1,#ca do m(cb,function()bootTo(Z[A],a1[A])end)end;menuPro("Select Boot File",ca,cb)else bootTo(Z[1],a1[1])end elseif not isBoot(b1,b2)then status("Search For A Bootable Disk",0.5)for a0,w in fsList()do local O,cc=i(w)local function cd(M)if O.exists(M)then status("Set As Bootable: "..getLabel(w,M))setDataPart(1,w)setDataPart(3,M)cc=1;return 1 end end;if cd("/boot/kernel/pipes")then break end;if screen and cd("/OS.lua")then break else if cd("/init.lua")then break end end;local _="/boot/kernel/"for a0,M in ipairs(O.list(_)or{})do if cd(_..M)then break end end;if cc then break end end;if isBoot(getDataPart(1),getDataPart(3))then goto c7 else status("No Bootable Medium Found",true,1)end else bootTo(b1,b2)end;goto c1
